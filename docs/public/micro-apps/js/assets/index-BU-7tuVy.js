(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var u={};var f;function g(){if(f)return u;f=1,Object.defineProperty(u,"__esModule",{value:!0});var o=typeof window<"u"?window.proxy||window:{},e=function(r){o?.__POWERED_BY_QIANKUN__&&(window.moudleQiankunAppLifeCycles||(window.moudleQiankunAppLifeCycles={}),o.qiankunName&&(window.moudleQiankunAppLifeCycles[o.qiankunName]=r))};return u.default=e,u.qiankunWindow=o,u.renderWithQiankun=e,u}var b=g();class y{constructor(e,r={}){this.container=e,this.itemHeight=r.itemHeight??72,this.overscan=r.overscan??3,this.itemRender=r.itemRender??(s=>s),this.data=[],this.viewportHeight=this.container.clientHeight,this.scroller=document.createElement("div"),this.scroller.style.position="relative",this.container.appendChild(this.scroller),this.content=document.createElement("div"),this.content.style.position="absolute",this.content.style.left="0",this.content.style.right="0",this.scroller.appendChild(this.content),this.handleScroll=this.handleScroll.bind(this),this.container.addEventListener("scroll",this.handleScroll)}init(e){this.data=e,this.scroller.style.height=`${this.data.length*this.itemHeight}px`,this.render()}handleScroll(){this.render()}render(){const e=this.container.scrollTop,r=Math.max(0,Math.floor(e/this.itemHeight)-this.overscan),s=Math.min(this.data.length,Math.ceil((e+this.viewportHeight)/this.itemHeight)+this.overscan),n=document.createDocumentFragment();this.content.innerHTML="",this.content.style.top=`${r*this.itemHeight}px`;for(let i=r;i<s;i+=1)n.appendChild(this.itemRender(this.data[i],i));this.content.appendChild(n)}scrollToTop(){this.container.scrollTop=0}scrollToBottom(){this.container.scrollTop=this.data.length*this.itemHeight}scrollToIndex(e){this.container.scrollTop=e*this.itemHeight}scrollToOffset(e){this.container.scrollTop=e}scrollIntoView(e){const r=e*this.itemHeight,s=r+this.itemHeight,n=this.container.scrollTop,i=n+this.viewportHeight;r<n?this.container.scrollTop=r:s>i&&(this.container.scrollTop=s-this.viewportHeight)}}const h=Array.from({length:1e3},(o,e)=>({id:e,content:`这是第 ${e+1} 行内容，演示纯 JS 虚拟列表渲染。`})),T=`
  <div class="virt-list-controls">
    <div class="virt-list-control-group">
      <label for="scrollToIndexInput">滚动到索引:</label>
      <input type="number" id="scrollToIndexInput" placeholder="0" min="0" value="50" />
      <button class="virt-list-btn virt-list-btn-primary" id="btnScrollToIndex">滚动到索引</button>
    </div>
    <div class="virt-list-control-group">
      <label for="scrollToOffsetInput">滚动到偏移:</label>
      <input type="number" id="scrollToOffsetInput" placeholder="0" min="0" value="1000" />
      <button class="virt-list-btn virt-list-btn-secondary" id="btnScrollToOffset">滚动到偏移</button>
    </div>
    <div class="virt-list-control-group">
      <label for="scrollIntoViewInput">滚动到可视区域:</label>
      <input type="number" id="scrollIntoViewInput" placeholder="0" min="0" value="30" />
      <button class="virt-list-btn virt-list-btn-success" id="btnScrollIntoView">滚动到可视区域</button>
    </div>
  </div>
  <div class="virt-list-controls">
    <button class="virt-list-btn virt-list-btn-primary" id="btnTop">滚动到顶部</button>
    <button class="virt-list-btn virt-list-btn-primary" id="btnBottom">滚动到底部</button>
    <button class="virt-list-btn virt-list-btn-warning" id="btnRandom">随机滚动</button>
    <button class="virt-list-btn virt-list-btn-success" id="btnToggleScrollbar">切换真实滚动条</button>
  </div>
  <div id="status" class="status-text"></div>
  <div class="virt-list-container" id="virtListContainer"></div>
`;function w(o){o.innerHTML=T;const e=o.querySelector("#virtListContainer"),r=o.querySelector("#status");let s=!1;const n=[],i=new y(e,{itemHeight:72,overscan:4,itemRender:t=>{const d=document.createElement("div");return d.className="virt-item",d.style.backgroundColor=`hsl(${t.id*13%360} 75% 95%)`,d.innerHTML=`
        <div style="font-weight:bold;">Item ${t.id}</div>
        <div style="color:#666;font-size:12px;">${t.content}</div>
        <div style="color:#999;font-size:10px;">Key: ${t.id} (Pure JS)</div>
      `,d}});i.init(h);const c=t=>Number.parseInt(o.querySelector(`#${t}`).value,10),l=t=>{r.textContent=t},a=(t,d)=>{const m=o.querySelector(`#${t}`);m.addEventListener("click",d),n.push(()=>m.removeEventListener("click",d))};return a("btnTop",()=>{i.scrollToTop(),l("已滚动到顶部")}),a("btnBottom",()=>{i.scrollToBottom(),l("已滚动到底部")}),a("btnScrollToIndex",()=>{const t=c("scrollToIndexInput");if(Number.isNaN(t)||t<0||t>=h.length){l("请输入有效索引 (0 - 999)");return}i.scrollToIndex(t),l(`已滚动到索引 ${t}`)}),a("btnScrollToOffset",()=>{const t=c("scrollToOffsetInput");if(Number.isNaN(t)||t<0){l("请输入有效偏移值");return}i.scrollToOffset(t),l(`已滚动到偏移 ${t}`)}),a("btnScrollIntoView",()=>{const t=c("scrollIntoViewInput");if(Number.isNaN(t)||t<0||t>=h.length){l("请输入有效索引 (0 - 999)");return}i.scrollIntoView(t),l(`已确保索引 ${t} 在可视区域`)}),a("btnRandom",()=>{const t=Math.floor(Math.random()*h.length);o.querySelector("#scrollToIndexInput").value=String(t),i.scrollToIndex(t),l(`随机滚动到索引 ${t}`)}),a("btnToggleScrollbar",()=>{s=!s,e.classList.toggle("hide-native-scrollbar",s),l(s?"已隐藏真实滚动条":"已显示真实滚动条")}),l("示例已就绪：1000 行虚拟列表"),()=>{n.forEach(t=>t()),o.innerHTML=""}}let p=null;function v(o){const e=o?.container?.querySelector("#js-root")??document.getElementById("js-root");e&&(p?.(),p=w(e))}b.renderWithQiankun({bootstrap(){return Promise.resolve()},mount(o){return v(o),Promise.resolve()},unmount(){return p?.(),p=null,Promise.resolve()},update(o){return v(o),Promise.resolve()}});b.qiankunWindow.__POWERED_BY_QIANKUN__||v();
